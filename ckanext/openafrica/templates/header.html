{% ckan_extends %}
{% block header_wrapper %}
<div id="content-offset-div"></div>
<div class="navbar">

  <div class="navbar-inner navbar-fixed-top">
    <div class="alert alert-maintenance alert-dismissible text-center"
         id="alert-box"
         role="alert">
      <button type="button" class="close" data-dismiss="alert"
              id="alert-dismiss"
              aria-label="Close">
        <span aria-hidden="true">Ã—</span>
      </button>
      <p>Server migration ongoing. Expect the unexpected. For any queries, reach out to support@codeforafrica.org.</p>
    </div>
    <div class="container">

      <!-- Be sure to leave the brand out there if you want it shown -->
      {% block header_logo %}
      {% if g.site_logo %}
      <a class="logo brand" href="{{ h.url('home') }}"><img
          src="{{ g.site_logo }}" alt="{{ g.site_title }}"
          title="{{ g.site_title }}"/></a>
      {% else %}
      <a class="brand" href="{{ h.url('home') }}"><img
          src="https://cloud.githubusercontent.com/assets/877919/14067805/7e3ff5ae-f476-11e5-88eb-059d88816232.png"
          alt="{{ g.site_title }}" title="{{ g.site_title }}"/></a>
      {% endif %}
      {% endblock %}

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse"
         data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>


      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li><a href="/dataset">Datasets</a></li>
          <li><a href="/organization">Organisations</a></li>
          <li><a href="/groups">Groups</a></li>
          <li><a href="/about">About</a></li>
          {% if h.is_plugin_enabled('datarequests') %}
          <li><a href="/datarequest">{{_('Data Requests')}}</a></li>
          {% endif %}
        </ul>
        <ul class="nav pull-right">
          {% if c.userobj %}
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              {{ h.gravatar((c.userobj.email_hash if c and c.userobj else ''),
              size=30) }}
              <span class="username">{{ c.userobj.display_name }}</span>
            </a>
            <ul class="dropdown-menu">
              <li><a
                  href="{{ h.url_for(controller='user', action='read', id=c.userobj.name) }}">Profile</a>
              </li>
              {% if c.userobj.sysadmin %}
              <li><a href="{{ h.url_for(controller='admin', action='index') }}">Admin</a>
              </li>
              {% endif %}
              <li>
                <a href="{{ h.url_for(controller='user', action='dashboard') }}">Control
                  Panel</a>
              </li>
              <li><a
                  href="{{ h.url_for(controller='user', action='edit', id=c.userobj.name) }}">Options</a>
              </li>
              <li><a href="{{ h.url_for('/user/_logout') }}">Logout</a></li>
            </ul>
          </li>
          {% else %}
          <li>{% link_for _('Log in'), controller='user', action='login' %}</li>
          <li>{% link_for _('Register'), controller='user', action='register'
            %}
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
    var show_alert = function () {
        if ($(window).width() > 979) {
          // get the height of the alertbox
          var alert_height = $('#alert-box').outerHeight();
          // offset the main content
          $('#content-offset-div').css('margin-top', alert_height);

          $('#alert-dismiss').click(function () {
              // remove offset
              $('#content-offset-div').css('display', 'none');
          }); }

    };
    window.onload = function () {
        console.log('Window load');
        show_alert();

        $(window).resize(function() {
        console.log('Window resize');
        show_alert()
    });
    };


</script>
{% endblock %}
